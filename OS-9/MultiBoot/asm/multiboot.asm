;****************************************************
;* Program Code / Data Areas                        *
;****************************************************

        ORG     $3800

M3800   LDX     #M3800                   ;3800: 8E 38 00       '.8.'
        LDY     #M2600                   ;3803: 10 8E 26 00    '..&.'
Z3807   LDD     ,X++                     ;3807: EC 81          '..'
        STD     ,Y++                     ;3809: ED A1          '..'
        CMPX    #M3900                   ;380B: 8C 39 00       '.9.'
        BCS     Z3807                    ;380E: 25 F7          '%.'
        LBSR    Z39AB                    ;3810: 17 01 98       '...'
        LBSR    Z39C1                    ;3813: 17 01 AB       '...'
        FCC     "        MultiBoot V1."  ;3816: 20 20 20 20 20 20 20 20 4D 75 6C 74 69 42 6F 6F 74 20 56 31 2E '        MultiBoot V1.'
        FCC     "12"                     ;382B: 31 32          '12'
        FCB     $0D                      ;382D: 0D             '.'
        FCC     " by Terry Todd "        ;382E: 20 62 79 20 54 65 72 72 79 20 54 6F 64 64 20 ' by Terry Todd '
        FCB     $26                      ;383D: 26             '&'
        FCC     " Allen Huffman"         ;383E: 20 41 6C 6C 65 6E 20 48 75 66 66 6D 61 6E ' Allen Huffman'
        FCB     $0D                      ;384C: 0D             '.'
        FCC     "     Copyright (C) 19"  ;384D: 20 20 20 20 20 43 6F 70 79 72 69 67 68 74 20 28 43 29 20 31 39 '     Copyright (C) 19'
        FCC     "93 by"                  ;3862: 39 33 20 62 79 '93 by'
        FCB     $0D                      ;3867: 0D             '.'
        FCC     "       Sub-Etha Softw"  ;3868: 20 20 20 20 20 20 20 53 75 62 2D 45 74 68 61 20 53 6F 66 74 77 '       Sub-Etha Softw'
        FCC     "are"                    ;387D: 61 72 65       'are'
        FCB     $0D,$00                  ;3880: 0D 00          '..'
        LDY     #M05C0                   ;3882: 10 8E 05 C0    '....'
        STY     M0088                    ;3886: 10 9F 88       '...'
        LBSR    Z39C1                    ;3889: 17 01 35       '..5'
        FCC     "     Use UP/DOWN to s"  ;388C: 20 20 20 20 20 55 73 65 20 55 50 2F 44 4F 57 4E 20 74 6F 20 73 '     Use UP/DOWN to s'
        FCC     "croll"                  ;38A1: 63 72 6F 6C 6C 'croll'
        FCB     $0D                      ;38A6: 0D             '.'
        FCC     "[ENTER] Selects   [BR"  ;38A7: 5B 45 4E 54 45 52 5D 20 53 65 6C 65 63 74 73 20 20 20 5B 42 52 '[ENTER] Selects   [BR'
        FCC     "EAK] Quits"             ;38BC: 45 41 4B 5D 20 51 75 69 74 73 'EAK] Quits'
        FCB     $00                      ;38C6: 00             '.'
Z38C7   LDB     M3AEB                    ;38C7: F6 3A EB       '.:.'
        LBSR    Z39DD                    ;38CA: 17 01 10       '...'
        LDU     #M04A4                   ;38CD: CE 04 A4       '...'
        LDB     M3AFF                    ;38D0: F6 3A FF       '.:.'
        LBEQ    Z39A8                    ;38D3: 10 27 00 D1    '.'..'
        SUBB    M3AEB                    ;38D7: F0 3A EB       '.:.'
        CMPB    #$08                     ;38DA: C1 08          '..'
        BCS     Z38E0                    ;38DC: 25 02          '%.'
        LDB     #$08                     ;38DE: C6 08          '..'
Z38E0   PSHS    X,B                      ;38E0: 34 14          '4.'
        STU     M0088                    ;38E2: DF 88          '..'
        JSR     Z3AD0                    ;38E4: BD 3A D0       '.:.'
        PULS    X,B                      ;38E7: 35 14          '5.'
        LEAX    $20,X                    ;38E9: 30 88 20       '0. '
        LEAU    $20,U                    ;38EC: 33 C8 20       '3. '
        DECB                             ;38EF: 5A             'Z'
        BNE     Z38E0                    ;38F0: 26 EE          '&.'
Z38F2   LDA     M3AEA                    ;38F2: B6 3A EA       '.:.'
        SUBA    M3AEB                    ;38F5: B0 3A EB       '.:.'
        LDB     #$20                     ;38F8: C6 20          '. '
        MUL                              ;38FA: 3D             '='
        ADDD    #M04A3                   ;38FB: C3 04 A3       '...'
        TFR     D,X                      ;38FE: 1F 01          '..'
M3900   LDA     #$6A                     ;3900: 86 6A          '.j'
        STA     ,X                       ;3902: A7 84          '..'
        LDY     M3AFD                    ;3904: 10 BE 3A FD    '..:.'
Z3908   DEY                              ;3908: 31 3F          '1?'
        BNE     GETKEY                   ;390A: 26 05          '&.'
        LEAS    $02,S                    ;390C: 32 62          '2b'
        LBRA    Z39A8                    ;390E: 16 00 97       '...'
GETKEY  JSR     [POLCAT]                 ;3911: AD 9F A0 00    '....'
        BEQ     Z3908                    ;3915: 27 F1          ''.'
        LDB     #$60                     ;3917: C6 60          '.`'
        STB     ,X                       ;3919: E7 84          '..'
        LDB     #$FF                     ;391B: C6 FF          '..'
        CMPA    #$5E                     ;391D: 81 5E          '.^'
        BEQ     UP                       ;391F: 27 11          ''.'
        CMPA    #$0A                     ;3921: 81 0A          '..'
        BEQ     DOWN                     ;3923: 27 24          ''$'
        CMPA    #$0D                     ;3925: 81 0D          '..'
        BEQ     ENTER                    ;3927: 27 3E          ''>'
        CMPA    #$03                     ;3929: 81 03          '..'
        BNE     Z38F2                    ;392B: 26 C5          '&.'
        CLR     RSTFLG                   ;392D: 0F 71          '.q'
        JMP     DLOAD                    ;392F: 7E 8C 1B       '~..'
UP      LDA     M3AEA                    ;3932: B6 3A EA       '.:.'
        BEQ     Z38F2                    ;3935: 27 BB          ''.'
        STB     M0155                    ;3937: F7 01 55       '..U'
        DECA                             ;393A: 4A             'J'
        STA     M3AEA                    ;393B: B7 3A EA       '.:.'
        CMPA    M3AEB                    ;393E: B1 3A EB       '.:.'
        BCC     Z3946                    ;3941: 24 03          '$.'
        DEC     M3AEB                    ;3943: 7A 3A EB       'z:.'
Z3946   LBRA    Z38C7                    ;3946: 16 FF 7E       '..~'
DOWN    LDA     M3AEA                    ;3949: B6 3A EA       '.:.'
        INCA                             ;394C: 4C             'L'
        CMPA    M3AFF                    ;394D: B1 3A FF       '.:.'
        BCC     Z38F2                    ;3950: 24 A0          '$.'
        STB     M0156                    ;3952: F7 01 56       '..V'
        STA     M3AEA                    ;3955: B7 3A EA       '.:.'
        LDA     M3AEB                    ;3958: B6 3A EB       '.:.'
        ADDA    #$07                     ;395B: 8B 07          '..'
        CMPA    M3AEA                    ;395D: B1 3A EA       '.:.'
        BCC     Z3946                    ;3960: 24 E4          '$.'
        INC     M3AEB                    ;3962: 7C 3A EB       '|:.'
        BRA     Z3946                    ;3965: 20 DF          ' .'
ENTER   LDB     M3AEA                    ;3967: F6 3A EA       '.:.'
        INCB                             ;396A: 5C             '\'
        BSR     Z39DD                    ;396B: 8D 70          '.p'
        LEAX    -$05,X                   ;396D: 30 1B          '0.'
        PSHX                             ;396F: 34 10          '4.'
        LDX     #DCOPC                   ;3971: 8E 00 EA       '...'
        LDD     #M0200                   ;3974: CC 02 00       '...'
        STD     ,X   ; (DCOPC-DCOPC)     ;3977: ED 84          '..'
        LDD     #M0001                   ;3979: CC 00 01       '...'
        STD     DCTRK-DCOPC,X            ;397C: ED 02          '..'
        LDD     #M01DA                   ;397E: CC 01 DA       '...'
        STD     DCBPT-DCOPC,X            ;3981: ED 04          '..'
        JSR     [DSKCON]                 ;3983: AD 9F C0 04    '....'
        TST     DCSTA-DCOPC,X            ;3987: 6D 06          'm.'
        BNE     Z39DA                    ;3989: 26 4F          '&O'
        LDY     DCBPT-DCOPC,X            ;398B: 10 AE 04       '...'
        LEAY    $15,Y                    ;398E: 31 A8 15       '1..'
        PULS    U                        ;3991: 35 40          '5@'
        LDB     #$05                     ;3993: C6 05          '..'
Z3995   LDA     ,U+                      ;3995: A6 C0          '..'
        STA     ,Y+                      ;3997: A7 A0          '..'
        DECB                             ;3999: 5A             'Z'
        BNE     Z3995                    ;399A: 26 F9          '&.'
        LDA     #$03                     ;399C: 86 03          '..'
        STA     ,X                       ;399E: A7 84          '..'
        JSR     [DSKCON]                 ;39A0: AD 9F C0 04    '....'
        TST     $06,X                    ;39A4: 6D 06          'm.'
        BNE     Z39DA                    ;39A6: 26 32          '&2'
Z39A8   JMP     Z2602                    ;39A8: 7E 26 02       '~&.'
Z39AB   LDA     #$57                     ;39AB: 86 57          '.W'
        STA     M95C9                    ;39AD: B7 95 C9       '...'
        LDA     #$10                     ;39B0: 86 10          '..'
        STA     MFF22                    ;39B2: B7 FF 22       '.."'
        LDD     #M3F00                   ;39B5: CC 3F 00       '.?.'
        STD     MFFBC                    ;39B8: FD FF BC       '...'
        JSR     ZF652                    ;39BB: BD F6 52       '..R'
        JMP     ZA928                    ;39BE: 7E A9 28       '~.('
Z39C1   LDX     ,S                       ;39C1: AE E4          '..'
Z39C3   LDA     ,X+                      ;39C3: A6 80          '..'
        BEQ     Z39CD                    ;39C5: 27 06          ''.'
        JSR     [CHROUT]                 ;39C7: AD 9F A0 02    '....'
        BRA     Z39C3                    ;39CB: 20 F6          ' .'
Z39CD   STX     ,S                       ;39CD: AF E4          '..'
RETURN  RTS                              ;39CF: 39             '9'
PRINT   LDA     ,X+                      ;39D0: A6 80          '..'
        BEQ     RETURN                   ;39D2: 27 FB          ''.'
        JSR     [CHROUT]                 ;39D4: AD 9F A0 02    '....'
        BRA     PRINT                    ;39D8: 20 F6          ' .'
Z39DA   JMP     IOERROR                  ;39DA: 7E D7 09       '~..'
Z39DD   LDX     #M3B00                   ;39DD: 8E 3B 00       '.;.'
        TSTB                             ;39E0: 5D             ']'
        BEQ     RETURN                   ;39E1: 27 EC          ''.'
DOWN2   LEAX    $20,X                    ;39E3: 30 88 20       '0. '
        DECB                             ;39E6: 5A             'Z'
        BNE     DOWN2                    ;39E7: 26 FA          '&.'
        RTS                              ;39E9: 39             '9'
        NEG     M0000                    ;39EA: 00 00          '..'
        NEG     M0000                    ;39EC: 00 00          '..'
        NEG     M0000                    ;39EE: 00 00          '..'
        NEG     M0000                    ;39F0: 00 00          '..'
        NEG     M0000                    ;39F2: 00 00          '..'
        NEG     M0000                    ;39F4: 00 00          '..'
        NEG     M0000                    ;39F6: 00 00          '..'
        NEG     M0000                    ;39F8: 00 00          '..'
        NEG     M0000                    ;39FA: 00 00          '..'
        NEG     M0042                    ;39FC: 00 42          '.B'
        FCB     $42                      ;39FE: 42             'B'
        NEG     M0001                    ;39FF: 00 01          '..'

        END
